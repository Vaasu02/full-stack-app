events {}
http {
    # This loads the standard list of file types (text/css, application/javascript, etc.)
    include /etc/nginx/mime.types; 

    server {
        listen 80;
        server_name _;

        # REMOVE: default_type application/octet-stream; <--- REMOVE THIS LINE!

        # NEW: Explicitly define module script type inside the location where assets are served
        location ~* \.(js|mjs|css|svg|ico|png|jpg)$ {
             add_header Content-Type application/javascript;
             expires 1y;
             access_log off;
        }

        location /api/ {
            proxy_pass http://backend:5000; 
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }

        location / {
            root /usr/share/nginx/html;
            index index.html;
            try_files $uri $uri/ /index.html;
        }
    }
}
